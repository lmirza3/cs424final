<!DOCTYPE html>
<html lang="en">
	<head>
        <meta charset="utf-8">
		<title>D3 Test</title>
		<script src="https://d3js.org/d3.v4.js"></script>
	</head>
	<body>
        <script type="text/javascript">

        	d3.csv("cs424data-avg.csv", function(dataAvg) {
				d3.csv("cs424data.csv", function(dataSet) {

					//debug check dsv parse
					//console.log(dataSet);
					//console.log(dataAvg);

					//canvas
					var width = 650,
						height = 600,
						cw = width/2,
						ch = height/2;

					//frequency sets
					var freq700 = [],
						freq850 = [],
						freq1700 = [],
						freq1900 = [];

					dataSet.forEach(function(d){
						freq700.push(parseFloat(d.f700));
						freq850.push(parseFloat(d.f850));
						freq1700.push(parseFloat(d.f1700));
						freq1900.push(parseFloat(d.f1900));
					});
					//popping the end element, because object column gets parsed in
					freq700.pop();
					freq850.pop();
					freq1700.pop();
					freq1900.pop();

					//debug check freq array
					//console.log(freq700);
					//console.log(freq850);

					//edge decibels
					var tmpArr = freq700.concat(freq850, freq1700, freq1900);
					var maxDB = Math.max.apply(Math, tmpArr),
						minDB = Math.min.apply(Math, tmpArr);

					//debug check tmp and min/max
					// console.log(tmpArr);
					// console.log(maxDB);
					// console.log(minDB);

					var pi = Math.PI;

					var x = 41.87113567;
					var y = -87.647697227902;

					//sunburst scale
		            var sunArcScale = d3.scaleLinear()
		            	.domain([0,12])
		            	.range([minDB, maxDB])

					//set svg canvas
            		var canvas = d3.select("body").append("svg")
		            	.attr("width", width)
		            	.attr("height", height)

		            var group = svg.append("g")
          				.attr("transform", "translate("+ cw +","+ ch +")");

		            var arc = d3.svg.arc()
			           .innerRadius(50)
			           .outerRadius(70)
					   .startAngle(45 * (Math.PI/180)) //converting from degs to radians
					   .endAngle(3) //just radians

					vis.append("path")
					   .attr("d", arc)
					   .attr("transform", "translate(200,200)")
				});
			});

        </script>
	</body>
</html>